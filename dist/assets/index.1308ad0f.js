(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const u=document.querySelector(".cart__address"),E=async e=>{const t=fetch(`https://cep.awesomeapi.com.br/json/${e}`),o=fetch(`https://brasilapi.com.br/api/cep/v2/${e}`);return await Promise.any([t,o]).then(r=>r.json())},S=async e=>{try{const t=await E(e),{address:o,district:c,city:r,state:n,street:s,neighborhood:i}=t;if(t.code)throw new Error("teste");if(t.address){u.textContent=`${o} - ${c} - ${r} - ${n}`;return}u.textContent=`${s} - ${i} - ${r} - ${n}`;return}catch(t){t&&(u.textContent="CEP n\xE3o encontrado")}},g=async e=>{if(!e)throw new Error("ID n\xE3o informado");return await(await fetch(`https://api.mercadolibre.com/items/${e}`)).json()},b=async e=>{if(!e)throw new Error("Termo de busca n\xE3o informado");if(e!=="computador")throw new Error("Algum erro ocorreu, recarregue a p\xE1gina e tente novamente");return(await(await fetch(`https://api.mercadolibre.com/sites/MLB/search?q=${e}`)).json()).results},m=()=>{const e=localStorage.getItem("cartProducts");return e?JSON.parse(e):[]},I=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um ID");const o=[...m(),e];localStorage.setItem("cartProducts",JSON.stringify(o))},f=()=>{const e=localStorage.getItem("cartPrice");return e?JSON.parse(e):[]},$=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um Preco");const o=[...f(),e];localStorage.setItem("cartPrice",JSON.stringify(o))},L=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um ID");const o=m().filter(c=>c!==e);localStorage.setItem("cartProducts",JSON.stringify(o))},N=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um Preco");const o=f().filter(c=>c!==e);localStorage.setItem("cartPrice",JSON.stringify(o))},O=document.querySelector(".cart__products"),q=document.querySelector(".total-price"),p=e=>{const t=document.createElement("img");return t.className="product__image",t.src=e.replace("I.jpg","O.jpg"),t},C=()=>{const t=f().reduce((o,c)=>o+c,0);q.textContent=t,localStorage.setItem("total",t)},a=(e,t,o="")=>{const c=document.createElement(e);return c.className=t,c.innerText=o,c},j=(e,t,o)=>{e.remove(),L(t),N(o),C()},_=({id:e,title:t,price:o,pictures:c})=>{const r=document.createElement("li");r.className="cart__product";const n=a("div","cart__product__image-container"),s=p(c[0].url);n.appendChild(s);const i=p((c[1]||c[0]).url);n.appendChild(i),r.appendChild(n);const l=a("div","cart__product__info-container");l.appendChild(a("span","product__title",t));const h=a("span","product__price","R$ ");h.appendChild(a("span","product__price__value",o)),l.appendChild(h),r.appendChild(l);const w=a("i","material-icons cart__product__remove","delete");return r.appendChild(w),r.addEventListener("click",()=>j(r,e,o)),r},x=async e=>{I(e);const t=await g(e);O.appendChild(_(t)),$(t.price),C()},J=({id:e,title:t,thumbnail:o,price:c})=>{const r=document.createElement("section");r.className="product",r.appendChild(a("span","product__id",e));const n=a("div","img__container");n.appendChild(p(o)),r.appendChild(n),r.appendChild(a("span","product__title",t));const s=a("span","product__price","R$ ");s.appendChild(a("span","product__price__value",c)),r.appendChild(s);const i=a("button","product__add","Adicionar ao carrinho!");return i.addEventListener("click",()=>x(e)),r.appendChild(i),r};const P=document.querySelector(".products"),y=document.querySelector(".container"),D=document.querySelector(".cart__products"),A=document.querySelector(".total-price"),B=document.querySelector(".cep-input"),d=document.createElement("span");document.querySelector(".cep-button").addEventListener("click",()=>S(B.value));const v=(e,t)=>{d.classList=t,d.textContent=e,y.insertBefore(d,P)},T=async e=>{try{(await b(e)).forEach(o=>{P.appendChild(J(o))}),y.removeChild(d)}catch(t){v(t.message,"error")}},V=async e=>{(await Promise.all(e.map(async o=>g(o)))).forEach(o=>{D.appendChild(_(o))})};window.onload=()=>{v("carregando...","loading"),T("computador"),V(m()),A.textContent=localStorage.getItem("total")};
